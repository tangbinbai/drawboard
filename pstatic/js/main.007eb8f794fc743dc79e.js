(()=>{"use strict";var t,e={918:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"pstatic/images/d698170d90ec948afe4f59df47e64cbc.png"},872:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"pstatic/images/97ba6fe626a4130f6191e9c6ad8e5c81.png"},739:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"pstatic/images/05e0c32d24faba2c9b5ccdb87c55b5b6.png"},384:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"pstatic/images/f3bc474754cfa752dc62f46c66eda750.png"},84:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"pstatic/images/9d30c475890b703749a764f8011c55cf.mp3"},657:(t,e,i)=>{const s=t=>{const{toString:e}=Object.prototype;return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[e.call(t)]};class n{constructor(){this.events={}}register(t,e,i){this.events[t]||(this.events[t]=[]),this.events[t].push({eventFunc:e,data:i})}removeEvent(t,e){if(void 0===this.events&&(this.events={}),this.events[t]instanceof Array){const i=this.events[t];for(let t=0,s=i.length;t<s;t++)if(i[t].eventFunc===e){i.splice(t,1);break}}}trigger(t,e){if(!this.events[t])return;const i=this.events[t];for(let t=0,s=i.length;t<s;t++)i[t].eventFunc.call(this,e||i[t].data,i[t].data)}}const o=new n,r=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),a=(t,e)=>{const i=t.getBoundingClientRect();return[e[0]-i.x,e[1]-i.y]},h=(t,e)=>[t[0]+e[0],t[1]+e[1]],l=t=>{let e=[],i=[];t.forEach(((t,s)=>{s%2==0?e.push(t):i.push(t)})),e=e.sort(((t,e)=>t-e)),i=i.sort(((t,e)=>t-e));const s=e[e.length-1]-e[0],n=i[i.length-1]-i[0];return{x:e[0],y:i[0],width:s,height:n}},d=(()=>{const t=document.createElement("canvas").getContext("2d");return(e,i)=>{t.beginPath(),t.moveTo(i[0],i[1]);for(let e=2;e<i.length;e+=2)t.lineTo(i[e],i[e+1]);return t.closePath(),!!t.isPointInPath(e[0],e[1])}})(),c=(t,e)=>{const i=((t,e)=>{const i=[],s=t=>{t.enableClick&&t.isBoundingBox(e)&&i.push(t),t.children.length>0&&t.children.forEach((t=>{s(t)}))};return s(t),i})(t,e);return 0===i.length?t:(i.sort(((t,e)=>t.zIndex-e.zIndex)),i[i.length-1])},p=(t,e)=>{if(!t)return[];const i=[],s=t=>{null==e||e(t),i.push(t),t.children.length>0&&t.children.forEach((t=>{s(t)}))};return s(t),i};class g extends n{constructor(t){super(),this.type="node",this.name="",this.id="",this.active=!1,this.selected=!1,this.translate=[0,0],this.scale=1,this.origin=[.5,.5],this.rotate=0,this.zIndex=0,this.visible=!0,this.enableDrag=!0,this.enableClick=!0,this.enableSlected=!0,this.parent=null,this.children=[],this.boxPoints=[0,0,1,0,1,1,0,1],this.drawPoints=[],this.layout="LeftTop",this.fillStyle=[0,0,0,0],this.strokeStyle=[0,0,0,0],this.lineDash=[0,0],this.lineWidth=0,this.backgroundColor=null,this.skew=[0,0],this.flip=!1,this.matrix=null,this.extra={},this.opacity=1,this.shadowColor=[0,0,0,0],this.shadowBlur=0,this.boundExpand=0,this.fixedSize=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._points=[0,0,1,0,1,1,0,1];for(const e in t)this[e]=t[e]}appendNode(t){if(t instanceof Array)t.forEach((t=>{this.appendNode(t)}));else{if(this.children.includes(t))return;this.children.push(t),t.parent=this,o.trigger("appendNode",t)}}appendToNode(t){const{parent:e}=this;t.appendNode(this),e.removeNode(this)}getNodeByName(t){return this.children.find((e=>e.name===t))}removeNode(t){t instanceof Array?t.forEach((t=>{this.removeNode(t)})):this.children.forEach(((e,i)=>{e===t&&(this.children.splice(i,1),o.trigger("removeNode",t))}))}set x(t){this._x=t}get x(){return this._x}set y(t){this._y=t}get y(){return this._y}set width(t){this._width=t,this.setBoxPoints()}get width(){return this._width}set height(t){this._height=t,this.setBoxPoints()}get height(){return this._height}set points(t){this._points=t,this.setBoxPoints()}get points(){return this._points}setBoxPoints(){this.boxPoints=this.points.map(((t,e)=>e%2==0?t*this.width:t*this.height))}setSize(t){[this.width,this.height]=t,this.setBoxPoints()}getSize(){return[this.width,this.height]}setTranslate(t){this.translate=t}getTranslate(){return this.translate}getPosition(){return[this.x,this.y]}setPosition(t){[this.x,this.y]=t}setRotate(t){return this.rotate=t,this}getParams(){const t={};return Object.getOwnPropertyNames(this).forEach((e=>{["parent","children"].includes(e)||(t[e]=I(this[e]))})),t}clone(){const t=this.getParams();return o.trigger("cloneNode"),t}delete(){var t;null===(t=this.parent)||void 0===t||t.removeNode(this)}beforeLayout(){}afterLayout(){}beforeDraw(t){return t}isBoundingBox(t){if(this.boundExpand){const e=((t,e)=>{const{x:i,y:s,width:n,height:o}=l(t);return $(H((2*e+n)/n,(2*e+o)/o,i+n/2,s+o/2),t)})(this.drawPoints,this.boundExpand);return d(t,e)}return d(t,this.drawPoints)}getStyle(){return{fillStyle:this.fillStyle,strokeStyle:this.strokeStyle,opacity:this.opacity,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,lineWidth:this.lineWidth,lineDash:this.lineDash}}setStyle(t){this.shadowBlur&&(t.shadowColor=A(this.shadowColor)),t.shadowBlur=this.shadowBlur}getActiveStyle(){return{}}getSelectedStyle(){return{}}draw(t){T(t,this)}afterDraw(t){return t}}class u extends g{constructor(t){super(t),this.type="shape",this.name="rectangle",this.points=[0,0,1,0,1,1,0,1];for(const e in t)this[e]=t[e]}}class f extends g{constructor(t){super(t),this.src="",this.img=new Image,this.repeat=!1,this.flip=!1,this.type="image",this.name="imageName";for(const e in t)this[e]=t[e];this.img.crossOrigin="anonymous",this.init()}updateSrc(t,e){if(t instanceof Image){const[e,i]=this.getSize();return this.img=t,this.setSize([e,i]),this.trigger("onload"),t}return E(t,(t=>{if(null===t)return;this.img=t;const[i,s]=this.getSize();i||s||this.setSize([t.width,t.height]),this.trigger("onload"),e&&e()}))}init(){this.src&&E(this.src,(t=>{if(null===t)return;this.img=t;const[e,i]=this.getSize();e||i||this.setSize([t.width,t.height]),this.trigger("onload")}))}draw(t){this.img&&(()=>{const e=r([this.drawPoints[0],this.drawPoints[1]],[this.drawPoints[2],this.drawPoints[3]]),i=r([this.drawPoints[2],this.drawPoints[3]],[this.drawPoints[4],this.drawPoints[5]]);if(t.save(),t.globalAlpha=this.opacity,this.flip||t.translate(this.drawPoints[0],this.drawPoints[1]),this.flip&&(t.translate(this.drawPoints[0]+e,this.drawPoints[1]),t.scale(-1,1)),t.rotate((t=>{const e=(t[3]-t[1])/(t[2]-t[0]);let i=180*Math.atan(e)/Math.PI;return t[0]>t[2]&&(i+=180),i*Math.PI/180})(this.drawPoints)),(this.skew[0]||this.skew[1])&&t.transform(1,this.skew[0],this.skew[1],1,0,0),this.repeat){const s=t.createPattern(this.img,"repeat");if(!s)return;t.fillStyle=s,t.fillRect(0,0,e,i)}else t.drawImage(this.img,0,0,e,i);t.restore()})()}}class m extends g{constructor(t){super(t),this.fontSize=12,this.fontFamily="PingFangSC-Regular",this.name="text",this.type="text",this.textBaseLine="middle",this.textAlign="left",this.shadowBlur=0,this.minWidth=0,this.minHeight=0,this.indent=5,this.text="",this.beforeText="",this.fontscale=1,this.setSize([Math.max(this.minWidth,10),10]);for(const e in t)this[e]=t[e]}getText(){return this.text}setText(t){this.beforeText=this.text,this.text=t}getDrawDistance(){return r([this.drawPoints[0],this.drawPoints[1]],[this.drawPoints[6],this.drawPoints[7]])}getStyle(){return{fillStyle:this.fillStyle,fontSize:this.fontSize,fontFamily:this.fontFamily,textAlign:this.textAlign,textBaseline:this.textBaseLine}}setStyle(t){this.fontscale=this.getDrawDistance()/this.height;const e=this.fontSize*this.fontscale;t.font=`${e*window.devicePixelRatio}px ${this.fontFamily}`,this.shadowBlur&&(t.shadowColor=A(this.shadowColor)),t.shadowBlur=this.shadowBlur}beforeDraw(t){return this.beforeText!==this.text?(t.font=`${this.fontSize*B.devicePixelRatio}px ${this.fontFamily}`,this.setSize([Math.max(this.minWidth,t.measureText(this.text).width),Math.max(this.minHeight,this.fontSize*B.devicePixelRatio)])):""===this.text&&this.setSize([Math.max(this.minWidth,0),Math.max(this.minHeight,0)]),t}draw(t){this.setStyle(t),t.fillText(this.text,this.drawPoints[0],this.drawPoints[1]+.5*(this.drawPoints[5]-this.drawPoints[3]))}}class w extends g{constructor(t){super(t),this.lineWidth=5,this.points=[0,0,1,1],this.name="lineName",this.type="line",this.width=100,this.height=100,this.strokeStyle=[0,0,0,1];for(const e in t)this[e]=t[e]}draw(t){t.strokeStyle=A(this.strokeStyle),t.lineWidth=this.lineWidth,t.lineCap="round",t.beginPath(),t.moveTo(this.drawPoints[0],this.drawPoints[1]);for(let e=2;e<this.drawPoints.length;e+=2)t.lineTo(this.drawPoints[e],this.drawPoints[e+1]),t.save(),t.restore();t.stroke()}}class v extends g{constructor(t){super(t),this.type="shape",this.name="rectangle";for(const e in t)this[e]=t[e];this.points=[0,0,1,0]}draw(t){t.beginPath(),t.moveTo(this.drawPoints[0],this.drawPoints[1]),t.lineTo(this.drawPoints[2],this.drawPoints[3]),t.stroke()}}class y extends g{constructor(t){super(t),this.name="circle",this.fillStyle=[0,255,0,.4];for(const e in t)this[e]=t[e]}setRadius(t){this.setSize([2*t,2*t])}isBoundingBox(t){return r(t,[this.drawPoints[0],this.drawPoints[1]])<(this.fixedSize?this.width:r([this.drawPoints[4],this.drawPoints[5]],[this.drawPoints[0],this.drawPoints[1]]))}draw(t){t.beginPath(),t.arc(this.drawPoints[0],this.drawPoints[1],this.fixedSize?this.width:r([this.drawPoints[0],this.drawPoints[1]],[this.drawPoints[4],this.drawPoints[5]]),0,2*Math.PI),t.stroke(),t.fill()}}const x={leftTop:(t,e)=>[-e.origin[0]*e.width,-e.origin[1]*e.height],rightTop:(t,e)=>[t.width-e.origin[0]*e.width,-e.origin[1]*e.height],rightBottom:(t,e)=>[t.width-e.origin[0]*e.width,t.height-e.origin[1]*e.height],leftBottom:(t,e)=>[-e.origin[0]*e.width,t.height-e.origin[1]*e.height],center:(t,e)=>[Math.round(t.width/2-e.origin[0]*e.width),Math.round(t.height/2-e.origin[1]*e.height)],topCenter:(t,e)=>[t.width/2-e.origin[0]*e.width,0-e.origin[1]*e.height],bottomCenter:(t,e)=>[t.width/2-e.origin[0]*e.width,t.height-e.origin[1]*e.height],leftCenter:(t,e)=>[-e.origin[0]*e.width,t.height/2-e.origin[1]*e.height],rightCenter:(t,e)=>[t.width-e.origin[0]*e.width,t.height/2-e.origin[1]*e.height]},b=t=>{var e;if(!t.visible)return;t.beforeLayout&&t.beforeLayout(),x[t.layout]&&t.setPosition(x[t.layout](t.parent,t));const i=(t=>_([1,0,t.x+t.translate[0],0,1,t.y+t.translate[1]],[1,0,t.origin[0]*t.width,0,1,t.origin[1]*t.height],[t.scale,0,0,0,t.scale,0],[1,0,t.origin[0]*-t.width,0,1,t.origin[1]*-t.height]))(t),s=(null===(e=t.parent)||void 0===e?void 0:e.matrix)?_(t.parent.matrix,i):i;t.matrix=s,t.drawPoints=$(s,t.boxPoints),t.afterLayout&&t.afterLayout()};let S,P;const k={},N={fillStyle:()=>{var t;P.fillStyle.join(",")!==(null===(t=k.fillStyle)||void 0===t?void 0:t.join(","))&&(S.fillStyle=A(P.fillStyle),k.fillStyle=P.fillStyle)},strokeStyle:()=>{var t;P.strokeStyle.join(",")!==(null===(t=k.strokeStyle)||void 0===t?void 0:t.join(","))&&(S.strokeStyle=A(P.strokeStyle),k.strokeStyle=P.strokeStyle)},lineWidth:()=>{S.lineWidth!==P.lineWidth&&(S.lineWidth=P.lineWidth)},opacity:()=>{S.globalAlpha!==P.opacity&&(S.globalAlpha=P.opacity)},lineDash:()=>{var t;P.lineDash.join(",")!==(null===(t=k.lineDash)||void 0===t?void 0:t.join(","))&&(S.setLineDash(P.lineDash),k.lineDash=P.lineDash)},shadowBlur:()=>{P.shadowBlur!==k.shadowBlur&&(S.shadowBlur=P.shadowBlur,k.shadowBlur=P.shadowBlur)},shadowColor:()=>{},fontSize:()=>{S.font!==`${P.fontSize}px ${P.fontFamily}`&&(S.font=`${P.fontSize}px ${P.fontFamily}`)},fontFamily:()=>{S.font!==`${P.fontSize}px ${P.fontFamily}`&&(S.font=`${P.fontSize}px ${P.fontFamily}`)},textAlign:()=>{S.textAlign!==P.textAlign&&(S.textAlign=P.textAlign)},textBaseline:()=>{P.textBaseline!==S.textBaseline&&(S.textBaseline=P.textBaseline)}},C=t=>{N[t](S,P)},z=t=>{t.visible&&(t=>{var e;((t,e)=>{if(!e.backgroundColor)return;const i=A(e.backgroundColor);t.fillStyle=i,T(t,e)})(S,t),P=t.getStyle(),t.active&&(P=Object.assign(Object.assign({},P),t.getActiveStyle())),t.selected&&(P=Object.assign(Object.assign({},P),t.getSelectedStyle())),Object.keys(P).forEach(C),t.beforeDraw&&t.beforeDraw(S),t.draw(S),null===(e=t.afterDraw)||void 0===e||e.call(t,S)})(t)},T=(t,e)=>{if(!(e.drawPoints.length<4)){t.beginPath(),t.moveTo(e.drawPoints[0],e.drawPoints[1]);for(let i=2;i<e.drawPoints.length;i+=2)t.lineTo(e.drawPoints[i],e.drawPoints[i+1]);t.closePath(),0!==e.fillStyle[3]&&t.fill(),e.lineWidth>0&&t.stroke()}};class M{constructor(t){this.nodeListIsChanged=!1,this.rQA=0,this.stage=t.stage,this.ctx=this.stage.ctx,this.registerEvent()}updateNodeList(){this.stage.nodeList=[],p(this.stage,(t=>{this.stage.nodeList.push(t)})),this.nodeListIsChanged=!1}registerEvent(){o.register("appendNode",(()=>this.nodeListIsChanged=!0)),o.register("removeNode",(()=>this.nodeListIsChanged=!0))}drawFrame(t){this.rQA||(this.renderOneFrame=()=>{this.nodeListIsChanged&&this.updateNodeList(),(t=>{this.stage.nodeList.forEach(b)})(),this.render(),this.rQA=0,t&&t()},this.rQA=requestAnimationFrame(this.renderOneFrame))}render(){var t,e;this.ctx.clearRect(0,0,this.stage.width,this.stage.height),t=this.ctx,e=this.stage,S=t,e.nodeList.sort(((t,e)=>t.zIndex-e.zIndex)),e.nodeList.forEach(z)}}class B extends g{constructor(t){super(t),this.mode="view",this.nodeList=[],this.init(t)}init(t){var e;const i=Object.assign({canvas:document.createElement("canvas")},t);for(const t in i)this[t]=i[t];this.ctx=this.canvas.getContext("2d"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.setSize([this.width,this.height]),null===(e=this.wrapper)||void 0===e||e.appendChild(this.canvas),this.viewMode()}setSize(t){[this.width,this.height]=t,[this.canvas.width,this.canvas.height]=t}screenCoordToLogicPoint(t,e){if(e)return t=$(function(t){const e=t[0]*t[4]-t[3]*t[1];return[t[4]/e,t[1]/-e,(t[4]*t[2]-t[1]*t[5])/-e,t[3]/-e,t[0]/e,(t[3]*t[2]-t[0]*t[5])/e]}(e),[t[0]*B.devicePixelRatio,t[1]*B.devicePixelRatio]),t.map((t=>Math.round(t)));console.error("缺少matrix")}viewMode(){this.mode="view",this.canvas.style.cursor="default"}drawMode(){this.mode="draw",this.canvas.style.cursor="crosshair"}isDrawMode(){return"draw"===this.mode}}B.devicePixelRatio=window.devicePixelRatio,B.cssSizeToPhysSize=t=>{return e=t,i=[B.devicePixelRatio,B.devicePixelRatio],[e[0]*i[0],e[1]*i[1]];var e,i},B.physSizeToCssSize=t=>{return e=t,i=[B.devicePixelRatio,B.devicePixelRatio],[e[0]/i[0],e[1]/i[1]];var e,i};const G={Mobile:{tapstart:"touchstart",tapmove:"touchmove",tapend:"touchend",tapleave:"touchleave",getPosition:t=>[t.touches[0].clientX,t.touches[0].clientY]},PC:{tapstart:"mousedown",tapmove:"mousemove",tapend:"mouseup",tapleave:"mouseleave",getPosition:t=>[t.clientX,t.clientY]}},L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"PC";var O=i(618);const A=t=>`rgba(${t.join(",")})`,I=t=>{const e=s(t);let i,n,o;if("array"===e)i=[];else{if("object"!==e)return t;i={}}if("array"===e){for(n=0,o=t.length;n<o;n++)i.push(I(t[n]));return i}if("object"===e){for(n in t)i[n]=I(t[n]);return i}},E=(()=>{const t=new Map;return(e,i)=>{if(t.has(e))return i&&i(t.get(e)),t.get(e);const s=new Image;return s.crossOrigin="anonymous",s.onload=()=>{t.set(e,s),i&&i(s)},s.onerror=()=>{i&&i(null)},s.src=e,s}})(),D=t=>t.map(((e,i)=>[t[2*i],t[2*i+1]])).slice(0,Math.floor(t.length/2)),R=t=>{const e=[],i=[[0,0],[0+t.width,0],[0+t.width,t.height],[0,t.height]];return i.forEach(((t,s)=>{e.push(t);const n=s+1===i.length?0:s+1;var o,r;e.push((o=i[s],r=i[n],[Math.min(r[0],o[0])+(Math.max(r[0],o[0])-Math.min(r[0],o[0]))/2,Math.min(r[1],o[1])+(Math.max(r[1],o[1])-Math.min(r[1],o[1]))/2]))})),e},j=[{origin:[1,1],lockRatioX:!0,lockRatioY:!0},{origin:[.5,1],lockRatioX:!0},{origin:[0,1],lockRatioX:!0,lockRatioY:!0},{origin:[0,.5],lockRatioY:!0},{origin:[0,0],lockRatioX:!0,lockRatioY:!0},{origin:[.5,0],lockRatioX:!0},{origin:[1,0],lockRatioX:!0,lockRatioY:!0},{origin:[1,.5],lockRatioY:!0}],W=(t,e,i,s)=>{const{size:n=t.getSize(),position:o=t.getPosition()}=s,r=$(H(...i,e[0]*n[0],e[1]*n[1]),[0,0,n[0],0,n[0],n[1],0,n[1]]);let a=o[0]+Math.round(r[0]),h=o[1]+Math.round(r[1]),l=Math.round(r[2]-r[0]),d=Math.round(Math.round(r[5]-r[3]));if(l<0&&(a+=l,l=Math.abs(l)),d<0&&(h+=d,d=Math.abs(d)),t.setPosition([a,h]),"measure"!==t.name)t.setSize([l||1,d||1]);else{const e=[r[2]-r[0],r[5]-r[3]].map((t=>Math.abs(t)));e[0]>e[1]?(t.setPosition([a,o[1]]),t.setSize([e[0],1])):(t.setPosition([o[0],h]),t.setSize([1,e[1]]))}},F=(t,e)=>{t.origin=e;const i=_(q(t.x+t.translate[0],t.y+t.translate[1]),H(t.scale,t.scale,t.origin[0]*t.width,t.origin[1]*t.height));t.setPosition([t.x-(i[2]-t.matrix[2]),t.y-(i[5]-t.matrix[5])])},V=(t,e)=>{const i=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(i*i+s*s)};let Z;function $(t,e){Z=[];for(let i=0;i<e.length;i+=2)Z.push(t[0]*e[i]+t[1]*e[i+1]+t[2]),Z.push(t[3]*e[i]+t[4]*e[i+1]+t[5]);return Z}const{cos:Y,sin:U,PI:Q}=Math;function H(t,e,i,s){return _(q(i,s),[t,0,0,0,e,0],q(-i,-s))}const{tan:X}=Math,J=(t,e)=>[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]];function _(...t){return 2===t.length?J(t[0],t[1]):_(J(t[0],t[1]),...t.slice(2))}function q(t,e=0){return[1,0,t,0,1,e]}const{PI:K,cos:tt,sin:et,sqrt:it,pow:st}=Math,nt=1.70158,ot=1.525*nt,rt=nt+1,at=2*K/3,ht=2*K/4.5,lt=function(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},dt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-st(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-st(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-st(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-st(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-st(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-st(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-st(-2*t+2,5)/2,easeInSine:t=>1-tt(t*K/2),easeOutSine:t=>et(t*K/2),easeInOutSine:t=>-(tt(K*t)-1)/2,easeInExpo:t=>0===t?0:st(2,10*t-10),easeOutExpo:t=>1===t?1:1-st(2,-10*t),easeInOutExpo:t=>0===t?0:1===t?1:t<.5?st(2,20*t-10)/2:(2-st(2,-20*t+10))/2,easeInCirc:t=>1-it(1-st(t,2)),easeOutCirc:t=>it(1-st(t-1,2)),easeInOutCirc:t=>t<.5?(1-it(1-st(2*t,2)))/2:(it(1-st(-2*t+2,2))+1)/2,easeInBack:t=>rt*t*t*t-nt*t*t,easeOutBack:t=>1+rt*st(t-1,3)+nt*st(t-1,2),easeInOutBack:t=>t<.5?st(2*t,2)*(7.189819*t-ot)/2:(st(2*t-2,2)*((ot+1)*(2*t-2)+ot)+2)/2,easeInElastic:t=>0===t?0:1===t?1:-st(2,10*t-10)*et((10*t-10.75)*at),easeOutElastic:t=>0===t?0:1===t?1:st(2,-10*t)*et((10*t-.75)*at)+1,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-st(2,20*t-10)*et((20*t-11.125)*ht)/2:st(2,-20*t+10)*et((20*t-11.125)*ht)/2+1,easeInBounce:t=>1-lt(1-t),easeOutBounce:lt,easeInOutBounce:t=>t<.5?(1-lt(1-2*t))/2:(1+lt(2*t-1))/2},ct=t=>{let{transition:e="linear",duration:i=200,start:s=[0],end:n=[0],callback:o}=t,r=0,a=0,h=[0],l=0;const d=()=>{r=Date.now();const t=()=>{a=Math.min(Date.now()-r,i),s.forEach(((t,s)=>{const o=a/i,r=dt[e](o);h[s]=t+r*(n[s]-t)})),o&&o(h),a!==i&&(l=requestAnimationFrame(t))};t()};return{play:d,stop:()=>{cancelAnimationFrame(l)},over:()=>{o&&o(n),cancelAnimationFrame(l)},update:t=>{s=t.start||s,n=t.end||n,i=t.duration||i,d()}}};var pt=i(640);class gt extends g{constructor(t){super(t),this.url=t.url,this.qrOptions=t.qrOptions||{},this.init()}init(){const t=pt.create(this.url,this.qrOptions),{data:e,size:i}=t.modules,s=this.width/i;for(let t=0;t<i;t++)for(let n=0;n<i;n++){const o=new u({enableClick:!1});o.x=t*s,o.y=n*s,o.setSize([s,s]),0===e[t*i+n]?o.fillStyle=[0,0,0,1]:o.fillStyle=[255,255,255,1],this.appendNode(o)}}}class ut extends g{constructor(){super(...arguments),this.name="drawbord_coordinate",this.type="other",this.enableClick=!1,this.step=100,this.fillStyle=[255,255,255,.3],this.strokeStyle=[255,255,255,.015],this.hasGrid=!0,this.hasCalibration=!0,this.lineWidth=1,this.fontSize=20,this.fontFamily="PingFangSC-Regular",this.textAlign="left",this.textBaseline="middle"}beforeLayout(){this.setSize(this.parent.getSize()),this.points=[],this.step=100*Math.max(Math.round(1/this.parent.scale),1),this.points=this.points.concat([0,0/this.height,1,0/this.height,0,this.step/this.height,1,this.step/this.height])}showGrid(){this.hasGrid=!0}hideGrid(){this.hasGrid=!1}showCalibration(){this.hasCalibration=!0}hideCalibration(){this.hasCalibration=!1}dicretionCaculate(t){return t>0?Math.floor:Math.ceil}getStyle(){return{fillStyle:this.fillStyle,strokeStyle:this.strokeStyle,opacity:this.opacity,shadowBlur:this.shadowBlur,lineWidth:this.lineWidth,fontSize:this.fontSize,fontFamily:this.fontFamily,textAlign:this.textAlign,textBaseline:this.textBaseline}}draw(t){if(this.drawStep=this.drawPoints[5]-this.drawPoints[1],this.verticalLineNums=Math.ceil(this.parent.parent.width/this.drawStep),this.horizontalLineNums=Math.ceil(this.parent.parent.height/this.drawStep),this.horizontalRemainder=this.drawPoints[1]%this.drawStep,this.horizontalYSteps=this.dicretionCaculate(this.drawPoints[1])(this.drawPoints[1]/this.drawStep),this.verticalRemainder=this.drawPoints[0]%this.drawStep,this.verticalXSteps=this.dicretionCaculate(this.drawPoints[0])(this.drawPoints[0]/this.drawStep),this.hasGrid){for(let e=0;e<this.horizontalLineNums;e+=1)t.beginPath(),t.moveTo(0,this.drawStep*e+this.horizontalRemainder),t.lineTo(this.parent.parent.width,this.drawStep*e+this.horizontalRemainder),t.closePath(),t.stroke();for(let e=0;e<this.verticalLineNums;e+=1)t.beginPath(),t.moveTo(this.drawStep*e+this.verticalRemainder,0),t.lineTo(this.drawStep*e+this.verticalRemainder,this.parent.parent.height),t.closePath(),t.stroke()}if(this.hasCalibration){for(let e=0;e<=this.horizontalLineNums;e+=1)t.fillText((this.step*(e-this.horizontalYSteps)).toString(),4,20+this.drawStep*e+this.horizontalRemainder);for(let e=0;e<=this.verticalLineNums;e+=1)t.fillText((this.step*(e-this.verticalXSteps)).toString(),4+this.drawStep*e+this.verticalRemainder,20)}}}const ft=i(918),mt=i(384),wt=(t,e,i)=>Math.max(Math.min(t,i),e);class vt extends g{constructor(t){super(t),this.zIndex=1e3,this.name="iframe",this.sliderTotalMoveVec=[0,0],this.scrollSize=[0,0],this.src=t.src,this.enableDrag=!0,this.init()}initName(){this.blockName=new m({text:"WebView",fontSize:22,translate:[0,-10],layout:"leftTop",origin:[0,1]}),this.appendNode(this.blockName)}initClipper(){this.clipper=new f({src:ft.default,type:"control",width:60,height:186/121*60,zIndex:1001,translate:[45,-10],layout:"rightTop",origin:[.5,1],boundExpand:10,fillStyle:[255,255,255,.9]}),this.appendNode(this.clipper);let t=[0,0];this.clipper.register("tapmove",(e=>{t=h(t,e),t[0]=wt(t[0],-this.width,0);const i=(this.width+t[0])/B.devicePixelRatio;this.iframeWrap.style.width=(this.width+t[0])/B.devicePixelRatio+"px";const s=this.width-i*B.devicePixelRatio;this.clipper.setTranslate([45-s,-10])}))}justySliderOpacity(t){this.sliderTotalMoveVec[1]=600*(1-t),this.sliderBtn.setTranslate([0,600*(1-t)]),this.opacity=t}initSlider(){this.slider=new f({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAABkCAYAAABHLFpgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMi1jMDAwIDc5LjFiNjVhNzliNCwgMjAyMi8wNi8xMy0yMjowMTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkJCNTMwREM3MjM0MTFFRUEzMzZBNjQ4NTg2OUY4OTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkJCNTMwREQ3MjM0MTFFRUEzMzZBNjQ4NTg2OUY4OTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyQkI1MzBEQTcyMzQxMUVFQTMzNkE2NDg1ODY5Rjg5MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyQkI1MzBEQjcyMzQxMUVFQTMzNkE2NDg1ODY5Rjg5MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrAyxKIAAABPSURBVHjajJBJCgAgDAOD//+x1roclEgCehg6phQtcp4CoC8EV482ocFq7yoHlVMF2xc87ze1b1bB/XkTi1Ab6kIv0mk6tdh9OGorjyHAAHJPXMTF5ahOAAAAAElFTkSuQmCC",type:"control",translate:[-60,0],width:12,height:600,zIndex:1001,layout:"leftTop",origin:[.5,0],boundExpand:10}),this.sliderBtn=new f({src:mt.default,width:100,height:196/188*100,zIndex:1002,type:"control",layout:"leftTop",origin:[.5,.7],translate:[0,0],fillStyle:[255,255,255,.9],boundExpand:10}),this.sliderTotalMoveVec=[0,0],this.sliderBtn.register("tapmove",(t=>{this.sliderTotalMoveVec=h(this.sliderTotalMoveVec,t),this.sliderTotalMoveVec[1]=wt(this.sliderTotalMoveVec[1],0,600),this.justySliderOpacity(1-this.sliderTotalMoveVec[1]/600)})),this.slider.appendNode(this.sliderBtn),this.appendNode(this.slider)}init(){const{body:t}=document;this.iframeWrap=document.createElement("div"),this.iframeWin=document.createElement("iframe"),this.iframeWin.setAttribute("scrolling","auto"),this.iframeWin.setAttribute("src",this.src),this.iframeWrap.appendChild(this.iframeWin),this.iframeWrap.style.cssText="\n      position:fixed;\n      left:0;\n      top:0;\n      border:0;\n      transform-origin:left top;\n      opacity:1;\n      z-index:1000;\n      overflow:hidden;\n    ",this.iframeWin.style.cssText="\n      border:0;\n    ",this.iframeWrap.style.pointerEvents="none",this.setIframeSize(),t.appendChild(this.iframeWrap),document.body.addEventListener("mousedown",this.viewIframe.bind(this)),this.initClipper(),this.initSlider()}debugIframe(){this.iframeWrap.style.pointerEvents="inherit"}setScrollValue(t){this.scrollSize=t}viewIframe(){this.iframeWrap.style.pointerEvents="none"}setIframeSize(){const t=B.physSizeToCssSize(this.getSize()).map((t=>`${t}px`));[this.iframeWrap.style.width,this.iframeWrap.style.height]=t,[this.iframeWin.style.width,this.iframeWin.style.height]=t}delete(){var t;const{body:e}=document;null===(t=this.parent)||void 0===t||t.removeNode(this),e.removeChild(this.iframeWrap)}afterLayout(){const t=B.physSizeToCssSize([this.drawPoints[0],this.drawPoints[1]]).map((t=>`${t}px`));this.iframeWrap.style.transform=`\n      translate3D(\n        ${t.join(",")},\n        0\n      )\n      scale(${this.matrix[0]}, ${this.matrix[0]})\n    `,this.iframeWrap.style.opacity=this.opacity.toString()}}class yt extends g{constructor(t){super(t),this.step=1e4,this.fillStyle=[143,206,91,1],this.strokeStyle=[255,255,255,.1],this.pointYNums=0,this.lineWidth=1,this.fontSize=48,this.fontFamily="PingFangSC-Regular",this.textAlign="left";const e=Object.assign({name:"rule",type:"other",enableClick:!1},t);for(const t in e)this[t]=e[t]}getStyle(){return{fillStyle:this.fillStyle,strokeStyle:this.strokeStyle,opacity:this.opacity,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,lineWidth:this.lineWidth,fontSize:this.fontSize,fontFamily:this.fontFamily,textAlign:this.textAlign}}beforeLayout(){this.setSize(this.parent.getSize()),this.points=[];for(let t=0;t<=this.height;t+=this.step)this.points=this.points.concat([0,t/this.height,-40/this.width,t/this.height]);this.height%this.step!=0&&(this.points=this.points.slice(0,-4),this.points=this.points.concat([0,1,-40/this.width,1])),this.pointYNums=this.points.length;for(let t=0;t<=this.width;t+=this.step)this.points=this.points.concat([t/this.width,0,t/this.width,-20/this.height]);this.width%this.step!=0&&(this.points=this.points.slice(0,-4),this.points=this.points.concat([1,0,1,-20/this.height]))}draw(t){for(let e=0;e<this.pointYNums;e+=4)t.beginPath(),t.moveTo(this.drawPoints[e],this.drawPoints[e+1]),t.lineTo(this.drawPoints[e]-20,this.drawPoints[e+3]),t.closePath(),t.stroke();for(let e=this.pointYNums;e<this.points.length;e+=4)t.beginPath(),t.moveTo(this.drawPoints[e],this.drawPoints[e+1]),t.lineTo(this.drawPoints[e+2],this.drawPoints[e+1]-20),t.closePath(),t.stroke();for(let e=0;e<this.drawPoints.length;e+=4)t.textAlign=e>=this.pointYNums?"left":"right",this.z=e>=this.pointYNums?e-this.pointYNums:e,this.text=(this.step*this.z/4).toString(),e===this.pointYNums-4&&(this.text=this.height.toString()),e===this.drawPoints.length-4&&(this.text=this.width.toString()),t.fillText(this.text,this.drawPoints[e]+(e>=this.pointYNums?25:-15),this.drawPoints[e+1]-15+(e>=this.pointYNums?-20:60))}}class xt extends g{constructor(){super(...arguments),this.enableClick=!1,this.rule=null}placeControlPoints(){R(this.parent).forEach(((t,e)=>{let[i,s]=t;i+=i>0?14:-14,s+=s>0?14:-14,this.children[e].setPosition([i,s])}))}beforeLayout(){this.placeControlPoints()}bind(t){this.unbind(),R(this.parent).forEach(((t,e)=>{const i=new y({type:"control",width:12,height:12,fixedSize:!0,fillStyle:[143,206,91,1],name:e.toString()});i.getActiveStyle=()=>({fillStyle:[172,255,104,1]}),this.appendNode(i)})),t.appendNode(this),this.rule=new yt,t.appendNode(this.rule)}unbind(){this.children=[],this.rule&&this.rule.delete(),this.delete()}}class bt extends g{constructor(t){super(t),this.theme=[255,255,255],this.themeDeep=1,this.fillStyle=[...this.theme,this.getThemeDeep(.04)],this.strokeStyle=[...this.theme,this.getThemeDeep(.3)],this.lineWidth=1,this.lineDash=[5,2],this.type="default";for(const e in t)this[e]=t[e];this.init()}getActiveStyle(){return{strokeStyle:[...this.theme,1]}}getSelectedStyle(){return{strokeStyle:[128,200,138,1]}}getThemeDeep(t){return Math.min(1,this.themeDeep*t)}generateUI(){this.positionValue=new m({text:"",x:2,y:-20,fillStyle:[255,0,0,1],fontSize:10,enableClick:!1,enableDrag:!1,visible:!1}),this.sizeValue=new m({text:"",layout:"rightBottom",fillStyle:[255,0,0,1],translate:[0,24],origin:[1,1],fontSize:12,enableClick:!1,enableDrag:!1,visible:!1}),this.appendNode([this.sizeValue,this.positionValue])}getBlockChildren(){return this.children.filter((t=>t instanceof bt))}getOffset(){let t=[0,0],e=this;for(;"Block"===e.constructor.name&&"Block"===e.parent.constructor.name;)t=h(t,[e.x,e.y]),e=e.parent;return t}changeType(t){switch(t){case"image":this.type="image",this.fillStyle=[218,247,166,.2];break;case"icon":this.type="icon",this.fillStyle=[72,201,176,.2];break;case"text":this.type="text",this.fillStyle=[93,109,126,.2];break;default:this.fillStyle=[...this.theme,.04]}}beforeLayout(){this.selected?(this.sizeValue.visible=!0,this.positionValue.visible=!0,this.sizeValue.setText(`${this.width}x${this.height}`),this.positionValue.setText(`${this.x},${this.y}`)):(this.sizeValue.visible=!1,this.positionValue.visible=!1)}init(){this.generateUI()}}class St extends u{constructor(t){super(t),this.codeNodescale=1,this.generateWebPage=({html:t,css:e})=>{const i=document.createElement("style");this.codeBlock.innerHTML=t,this.codeBlock.style.scale=(1/B.devicePixelRatio).toString(),i.textContent=e,this.codeBlock.appendChild(i),this.codeBlock.className="webview",this.blockName.fillStyle=[222,222,222,1],this.codeNodescale=B.devicePixelRatio},this.code=null==t?void 0:t.code,this.enableDrag=!0,this.init(t),this.name&&this.initBlockName()}init(t){const{body:e}=document;this.codeBlock=document.createElement("WEBVIEW"===t.name?"div":"pre"),this.codeBlock.style.cssText=`\n      position:fixed;\n      left:0;\n      top:0;\n      border:0;\n      transform-origin:left top;\n      pointer-events: none;\n      opacity:1;\n      color:rgba(0,0,0,.6);\n      background-color:rgba(${this.fillStyle.join(",")});\n      font-size:10px;\n    `,e.appendChild(this.codeBlock),this.codeBlock.addEventListener("mousedown",(()=>{}))}initBlockName(){this.blockName=new m({text:this.name,fontSize:28,x:0,y:-30,layout:"leftTop",origin:[0,1],fillStyle:this.fillStyle}),this.appendNode(this.blockName)}delete(){var t;null===(t=this.parent)||void 0===t||t.removeNode(this),this.codeBlock.style.display="none"}setCode(t){if(this.codeBlock.style.display="block","WEBVIEW"===this.name)return this.generateWebPage(t),void this.setSize(B.cssSizeToPhysSize([this.codeBlock.clientWidth/B.devicePixelRatio,this.codeBlock.clientHeight/B.devicePixelRatio]));this.codeBlock.innerText=t,this.setSize(B.cssSizeToPhysSize([this.codeBlock.clientWidth,this.codeBlock.clientHeight]))}afterLayout(){const t=B.physSizeToCssSize([this.drawPoints[0]*this.codeNodescale,this.drawPoints[1]*this.codeNodescale]).map((t=>`${t}px`));this.codeBlock.style.transform=`\n      translate3D(\n        ${t.join(",")}, \n        0\n      )\n      scale(${this.matrix[0]}, ${this.matrix[0]})\n    `,this.codeBlock.style.opacity=this.opacity.toString()}}class Pt extends m{constructor(t){super(t),this.fillStyle=[0,222,0,.8],this.zIndex=1e3,this.fontSize=16,this.minWidth=80,this.minHeight=48,this.indent=20,this.parentDrawPointIndex=1,this.selfDrawPointIndex=3;for(const e in t)this[e]=t[e];this.init()}generateUI(){this.curveLine=new v({lineWidth:1,lineDash:[5,5],strokeStyle:[180,180,180,.3],fillStyle:[0,0,0,0]}),this.bottomLine=new u({x:0,y:this.height,width:this.width,enableDrag:!1,enableClick:!1,height:1,fillStyle:[180,180,180,.3]}),this.bottomLine.beforeLayout=()=>{this.bottomLine.width=this.width},this.appendNode([this.curveLine,this.bottomLine]),this.curveLine.afterLayout=()=>{this.curveLine.drawPoints=[this.parent.drawPoints[2*this.parentDrawPointIndex+0],this.parent.drawPoints[2*this.parentDrawPointIndex+1],this.drawPoints[2*this.selfDrawPointIndex+0],this.drawPoints[2*this.selfDrawPointIndex+1]]}}registerEvent(){this.register("tapmove",(()=>{const t=D(this.parent.drawPoints),e=D(this.drawPoints);[this.parentDrawPointIndex,this.selfDrawPointIndex]=((t,e)=>{let i=[0,0],s=V(t[0],e[0]);for(let n=0;n<t.length;n++)for(let o=0;o<e.length;o++){const r=V(t[n],e[o]);r<s&&(s=r,i=[n,o])}return i})(t,e),0===this.selfDrawPointIndex&&(this.selfDrawPointIndex=3),1===this.selfDrawPointIndex&&(this.selfDrawPointIndex=2)}))}init(){this.setSize([80,48]),this.generateUI(),this.registerEvent()}}const kt={rectangle:u,text:m,block:bt},Nt=(t={})=>{const e=(t=>{let e=null;const i=(t,s)=>{const n=(t=>{const e={};for(const i in t)"children"!==i&&(e[i]=t[i]);return e})(t),o=((t,e,i,s)=>{t||console.error("必须给一个小驼峰的精灵名称"),e=e||{},i=i||1;const n=[];for(let s=0;s<i;s++){const i=kt[t];n.push(new i(e))}return s&&n.forEach(((t,e)=>{s(t,e)})),1===n.length?n[0]:n})(n.name,n,1);e||(e=o,s=o);const{children:r}=t;o!==s&&s.appendNode(o),r&&r.length>0&&r.forEach((t=>{i(t,o)}))};return i(t,e),e})(t);return e},Ct=t=>{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},zt=(t,e)=>{let i=t;for(;i.parent;){if(i.parent===e)return!0;i=i.parent}return!1},Tt=t=>{var e;if(null===(e=t.children)||void 0===e?void 0:e.length)for(let e=0;e<t.children.length;e++)if(t.width===t.children[e].width&&t.height===t.children[e].height){const i=t.children[e];t.children.splice(e,1),t.children=t.children.concat((null==i?void 0:i.children)||[]),Tt(t)}};console.log(109080981);const Mt=["children","type","name","x","y","width","height","type"],Bt=(t,e)=>{if(null===t||"object"!=typeof t)return t;if(Array.isArray(t))return t.filter((t=>!0===t.visible)).map((t=>Bt(t,e)));let i=Object.entries(t).filter((([t])=>Mt.includes(t)));i=i.map((([i,s])=>["x","y","width","height"].includes(i)?!e||"FRAME"===e.type||"x"!==i&&"y"!==i||"INSTANCE"===e.type?[i,Math.round(s)]:[i,Math.round(s-e[i])]:[i,Bt(s,t)]));const s=Object.fromEntries(i);return s.customName=s.name,s.name="block",s},Gt=["image/jpg","image/jpeg","image/webp","image/png"],Lt=i(84);let Ot=0;const At=new Audio(Lt.default);At.setAttribute("muted","true");const It={enterBlock(){At.currentTime=0,Ot++>0&&At.play().catch((t=>{}))}},Et=i(872),Dt=i(739),Rt={1:{fillStyle:[0,0,160,.4],Class:u},2:{Class:y,fillStyle:[0,255,0,.4]},3:{Class:class extends g{constructor(t){super(t),this.name="star",this.type="shape",this.fillStyle=[255,255,0,1],this.width=100,this.height=100,this.points=[.5,0,.62,.375,1,.375,.68,.61,.81,1,.5,.76,.18,1,.31,.61,0,.375,.38,.375];for(const e in t)this[e]=t[e]}beforeLayout(){this.height=this.width,this.scale=2,this.setTranslate([-this.height/2,-this.height/2])}},fillStyle:[255,255,0,.4]},4:{Class:Et},5:{Class:Dt},m:{fillStyle:[255,255,0,0],Class:class extends g{constructor(t){super(t),this.sideLength=36,this.lineThickness=1,this.boundExpand=10,this.startDrawPosition=[0,0],this.name="measure",this.init()}drawHorizontally(){this.sideA.setSize([this.lineThickness,this.sideLength]),this.sideB.setSize([this.lineThickness,this.sideLength]),this.startDrawPosition[1]>this.y?(this.sideA.layout="leftBottom",this.sideB.layout="rightBottom",this.middleLine.origin=[0,0],this.middleLine.layout="leftBottom",this.valueText.layout="bottomCenter"):(this.sideA.layout="leftTop",this.sideB.layout="rightTop",this.middleLine.origin=[0,0],this.middleLine.layout="leftTop",this.valueText.layout="topCenter"),this.sideA.origin=[0,.5],this.sideB.origin=[1,.5],this.middleLine.setSize([Math.round(this.width),this.lineThickness]),this.valueText.origin=[.5,.5],this.valueText.setText(`${this.middleLine.width}`)}drawVertically(){this.sideA.setSize([this.sideLength,this.lineThickness]),this.sideB.setSize([this.sideLength,this.lineThickness]),this.startDrawPosition[0]>this.x?(this.sideA.layout="rightTop",this.sideB.layout="rightBottom",this.middleLine.layout="rightTop",this.middleLine.origin=[0,0],this.valueText.layout="rightCenter"):(this.sideA.layout="leftTop",this.sideB.layout="leftBottom",this.middleLine.origin=[0,0],this.middleLine.layout="leftTop",this.valueText.layout="leftCenter"),this.sideA.origin=[.5,0],this.sideB.origin=[.5,1],this.middleLine.setSize([this.lineThickness,Math.round(this.height)]),this.valueText.origin=[.5,.5],this.valueText.setText(`${this.middleLine.height}`)}init(){this.sideA=new u({fillStyle:[255,13,40,1],boundExpand:20,enableDrag:!1,shadowColor:[0,0,0,.2],shadowBlur:2,selected:!1}),this.sideB=new u({fillStyle:[255,13,40,1],boundExpand:20,enableDrag:!1,shadowBlur:2,selected:!1}),this.middleLine=new u({fillStyle:[255,13,40,1],origin:[.5,.5],enableDrag:!1,enableClick:!1,name:"middleLine",shadowBlur:2,selected:!1}),this.valueText=new m({text:"0px",fillStyle:[255,13,40,1],fontSize:16,enableDrag:!1,enableClick:!1,shadowBlur:2,selected:!1}),this.sideB.register("tapmove",(t=>{this.height>this.width?this.height+=t[1]:this.width+=t[0]})),this.sideA.register("tapmove",(t=>{this.height>this.width?(this.height-=t[1],this.y+=t[1]):(this.width-=t[0],this.x+=t[0])})),this.middleLine.beforeLayout=()=>{this.height>this.width?this.drawVertically():this.drawHorizontally()},this.middleLine.beforeDraw=t=>(t.save(),t.beginPath(),this.height>this.width?(t.rect(this.valueText.drawPoints[0],this.middleLine.drawPoints[1],this.valueText.drawPoints[2]-this.valueText.drawPoints[0],this.valueText.drawPoints[1]-this.middleLine.drawPoints[1]-5),t.rect(this.valueText.drawPoints[6],this.valueText.drawPoints[7]+5,this.valueText.drawPoints[2]-this.valueText.drawPoints[0],this.middleLine.drawPoints[7]-this.valueText.drawPoints[7]-5)):(t.rect(this.middleLine.drawPoints[0],this.valueText.drawPoints[1],this.valueText.drawPoints[0]-this.middleLine.drawPoints[0]-5,this.valueText.drawPoints[7]-this.valueText.drawPoints[1]),t.rect(this.valueText.drawPoints[2]+5,this.valueText.drawPoints[3],this.middleLine.drawPoints[2]-this.valueText.drawPoints[2]-5,this.valueText.drawPoints[7]-this.valueText.drawPoints[1])),t.clip(),t),this.middleLine.afterDraw=t=>(t.restore(),t),this.appendNode([this.sideA,this.sideB,this.middleLine,this.valueText]),this.register("drawStart",(t=>{this.startDrawPosition=t})),this.register("drawEnd",(()=>{this.height>this.width?(this.startDrawPosition[0]>this.x&&(this.x+=this.width-1),this.width=1):(this.startDrawPosition[1]>this.y&&(this.y+=this.height-1),this.height=1)}))}}},b:{Class:bt},s:{Class:class extends g{constructor(t){super(t),this.lineWidth=2,this.strokeStyle=[160,160,160,1],this.lineDash=[10,10],this.fillStyle=[0,0,0,0],this.init()}getStyle(){return{fillStyle:this.fillStyle,strokeStyle:this.strokeStyle,opacity:this.opacity,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,lineWidth:this.lineWidth,lineDash:this.lineDash}}init(){}}},t:{Class:class extends g{constructor(t){super(t),this.fillStyle=[0,0,0,0];for(const e in t)this[e]=t[e];this.init()}generateUI(){this.line=new w({enableClick:!1,enableDrag:!1,visible:!1,strokeStyle:[255,0,0,.7],width:0,height:0,lineWidth:2,lineDash:[5,5]}),this.positionValue=new m({text:"",x:2,y:2,color:[255,0,0,.7],width:100,height:200,fontSize:22,enableClick:!1,enableDrag:!1,visible:!1}),this.appendNode([this.line,this.positionValue])}beforeLayout(){this.line.visible=!0,this.positionValue.visible=!0,this.line.width=this.width,this.line.height=this.height,this.positionValue.x=this.width,this.positionValue.y=this.height,this.positionValue.setText("asdfasdf")}init(){this.generateUI()}}}},jt=new class extends g{constructor(t){super(t),this.point=[0,0],this.strokeStyle=[0,255,0,1],this.lineDash=[7,14],this.pointYNums=0,this.lineWidth=1,this.init()}init(){}draw(t){t.beginPath(),t.moveTo(this.point[0],0),t.lineTo(this.point[0],this.parent.height),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(0,this.point[1]),t.lineTo(this.parent.width,this.point[1]),t.closePath(),t.stroke()}updatePoint(t){this.point=t}}({point:[100,300],visible:!1}),Wt={i:"image",c:"icon",t:"text"},Ft={deviation:2,hasBlockChild:t=>{var e;return(null===(e=t.getBlockChildren)||void 0===e?void 0:e.call(t).length)>0},extractEffectiveAttributes:t=>t,getOverlayIntervals:t=>{t.sort(((t,e)=>t[0]-e[0]));const e=[t[0]];for(const i of t){const t=e[e.length-1];t[1]>=i[0]?t[1]=Math.max(t[1],i[1]):e.push(i)}return e},getGaps(t,e){const i=[0,...t.flat(),e],s=[];do{s.push(i.splice(0,2))}while(i.length>0);return s.map((t=>t[1]-t[0]))},getSidesDistance:t=>{const e=t.getBlockChildren();let i=1/0,s=1/0,n=1/0,o=1/0,r=1/0,a=1/0;return e.forEach((e=>{i=Math.min(i,e.y),s=Math.min(s,e.x),n=Math.min(n,t.width-e.x-e.width),o=Math.min(o,t.height-e.y-e.height),r=Math.abs(i-o),a=Math.abs(s-n)})),{top:i,left:s,right:n,bottom:o,verticalCenterOffset:r,horizontalCenterOffset:a}},isSpaceBetween:t=>3===t.length&&t[1]>t[0]&&t[1]>t[2],isSpaceAround:t=>{if(t.length>3){const e=t.slice(1,t.length-1).sort(((t,e)=>t-e));return(e[e.length-1]-e[0])/e[0]<.2}return!1}},Vt=t=>{const e=t.reduce(((t,e)=>t+e))/t.length;return t.map((t=>t-e)).reduce(((t,e)=>t+e))/t.length},Zt=(t,{verticalOverlayGaps:e,horizontalOverlayGaps:i})=>{const s=t.getBlockChildren(),n=s.map((t=>t.width)),o=Vt(n),r=t.getBlockChildren().map((t=>t.height)),a=Vt(r),h=(e.length-1)*(i.length-1);return o<10&&a<10&&e.length>2&&i.length>2&&s.length>=h-(i.length-2)?"wrap":"nowrap"},$t=({horizontalOverlayGaps:t,flexDirection:e,sidesDistance:i})=>{const s=["row"===e?i.left:i.top,"row"===e?i.horizontalCenterOffset:i.verticalCenterOffset,"row"===e?i.right:Math.max(20,i.bottom)];if("row"===e){let e=["flex-start","center","flex-end"][s.indexOf(Math.min(...s))];return"center"===e&&Ft.isSpaceBetween(t)&&(e="space-between"),"center"===e&&Ft.isSpaceAround(t)&&(e="space-around"),e}if("column"===e)return["flex-start","center","flex-end"][s.indexOf(Math.min(...s))]},Yt=({flexDirection:t,sidesDistance:e})=>{const i=["row"===t?e.top:e.left,"row"===t?e.verticalCenterOffset:e.horizontalCenterOffset,"row"===t?Math.max(20,e.bottom):e.right];return"row"===t||"column"===t?["flex-start","center","flex-end"][i.indexOf(Math.min(...i))]:void 0},Ut={setChildrenTopGap:t=>{for(const e of t)e.css=Object.assign(Object.assign({},e.css),{"margin-top":`${e.y}px`})},setChildreTopRelativeGap:(t,{verticalGaps:e,removeFirstGap:i=!1})=>{t.sort(((t,e)=>t.y-e.y));for(let s=0;s<t.length;s++)t[s].css=Object.assign(Object.assign({},t[s].css),{"margin-top":`${0===s&&i?0:e[s]}px`})},setChildrenLeftGap:t=>{for(const e of t)e.css=Object.assign(Object.assign({},e.css),{"margin-left":`${e.x}px`})},setChildrenLeftRelativeGap:(t,{horizontalGaps:e,removeFirstGap:i=!1})=>{t.sort(((t,e)=>t.x-e.x));for(let s=0;s<t.length;s++)t[s].css=Object.assign(Object.assign({},t[s].css),{"margin-left":`${0===s&&i?0:e[s]}px`})},setChildrenRightGap:(t,{block:e})=>{for(const i of t)i.css=Object.assign(Object.assign({},i.css),{"margin-right":e.width-i.x-i.width+"px"})},setChildrenRighttRelativeGap:(t,{horizontalGaps:e})=>{for(let i=0;i<t.length;i++)t.sort(((t,e)=>t.x-e.x)),t[i].css=Object.assign(Object.assign({},t[i].css),{"margin-right":`${e[i+1]}px`})},setChildreBottomGap:(t,{block:e})=>{for(const i of t)i.css=Object.assign(Object.assign({},i.css),{"margin-bottom":e.height-i.y-i.height+"px"})},setChildreBottomRelativeGap:(t,{verticalGaps:e})=>{t.sort(((t,e)=>t.y-e.y));for(let i=0;i<t.length;i++)t[i].css=Object.assign(Object.assign({},t[i].css),{"margin-bottom":`${e[i+1]}px`})},setChildrenSpaceBetweenGap(t,{horizontalGaps:e}){t.sort(((t,e)=>t.x-e.x)),t[0].css=Object.assign(Object.assign({},t[0].css),{"margin-left":`${e[0]}px`}),t[1].css=Object.assign(Object.assign({},t[1].css),{"margin-right":`${e[2]}px`})}},Qt={rowstartstart:(t,e)=>{Ut.setChildrenLeftRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps}),Ut.setChildrenTopGap(t)},rowcenterstart:(t,e)=>{Ut.setChildrenLeftRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps,removeFirstGap:!0}),Ut.setChildrenTopGap(t)},rowendstart:(t,e)=>{Ut.setChildrenRighttRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps}),Ut.setChildrenTopGap(t)},rowaroundstart:(t,e)=>{Qt.rowcentercenter(t,e),Ut.setChildrenTopGap(t)},rowbetweenstart:(t,e)=>{Ut.setChildrenSpaceBetweenGap(t,{horizontalGaps:e.attributes.horizontalGaps}),Ut.setChildrenTopGap(t)},rowstartcenter:(t,e)=>{Ut.setChildrenLeftRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps})},rowcentercenter:(t,e)=>{Ut.setChildrenLeftRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps,removeFirstGap:!0})},rowendcenter:(t,e)=>{Ut.setChildrenRighttRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps})},rowbetweencenter:(t,e)=>{Ut.setChildrenSpaceBetweenGap(t,{horizontalGaps:e.attributes.horizontalGaps})},rowaroundcenter:(t,e)=>{Qt.rowcentercenter(t,e)},rowstartend:(t,e)=>{Ut.setChildrenLeftRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps}),Ut.setChildreBottomGap(t,{block:e.block})},rowcenterend:(t,e)=>{Ut.setChildrenLeftRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps,removeFirstGap:!0}),Ut.setChildreBottomGap(t,{block:e.block})},rowendend:(t,e)=>{Ut.setChildrenRighttRelativeGap(t,{horizontalGaps:e.attributes.horizontalGaps}),Ut.setChildreBottomGap(t,{block:e.block})},rowaroundend:(t,e)=>{Qt.rowcentercenter(t,e),Ut.setChildreBottomGap(t,{block:e.block})},rowbetweenend:(t,e)=>{Ut.setChildrenSpaceBetweenGap(t,{horizontalGaps:e.attributes.horizontalGaps}),Ut.setChildreBottomGap(t,{block:e.block})},columnstartstart:(t,e)=>{Ut.setChildrenLeftGap(t),Ut.setChildreTopRelativeGap(t,{verticalGaps:e.attributes.verticalGaps})},columnstartcenter:(t,e)=>{Ut.setChildreTopRelativeGap(t,{verticalGaps:e.attributes.verticalGaps})},columnstartend:(t,e)=>{Ut.setChildrenRightGap(t,{block:e.block}),Ut.setChildreTopRelativeGap(t,{verticalGaps:e.attributes.verticalGaps})},columncenterstart:(t,e)=>{Ut.setChildrenLeftGap(t),Ut.setChildreTopRelativeGap(t,{verticalGaps:e.attributes.verticalGaps,removeFirstGap:!0})},columncentercenter:(t,e)=>{Ut.setChildreTopRelativeGap(t,{verticalGaps:e.attributes.verticalGaps,removeFirstGap:!0})},columncenterend:(t,e)=>{Ut.setChildrenRightGap(t,{block:e.block}),Ut.setChildreTopRelativeGap(t,{verticalGaps:e.attributes.verticalGaps,removeFirstGap:!0})},columnendstart:(t,e)=>{Ut.setChildrenLeftGap(t),Ut.setChildreBottomRelativeGap(t,{verticalGaps:e.attributes.verticalGaps})},columnendcenter:(t,e)=>{Ut.setChildreBottomRelativeGap(t,{verticalGaps:e.attributes.verticalGaps})},columnendend:(t,e)=>{Ut.setChildrenRightGap(t,{block:e.block}),Ut.setChildreBottomRelativeGap(t,{verticalGaps:e.attributes.verticalGaps})}},Ht={attributes:t=>{const e=t.getBlockChildren(),i=Ft.getOverlayIntervals(e.map((t=>[t.y,t.y+t.height]))),s=Ft.getOverlayIntervals(e.map((t=>[t.x,t.x+t.width])));return{verticalOverlayIntervals:i,horizontalOverlayIntervals:s,verticalOverlayGaps:Ft.getGaps(i,t.height),horizontalOverlayGaps:Ft.getGaps(s,t.width),verticalGaps:Ft.getGaps(e.map((t=>[t.y,t.y+t.height])),t.height),horizontalGaps:Ft.getGaps(e.map((t=>[t.x,t.x+t.width])),t.width),sidesDistance:Ft.getSidesDistance(t)}},getFlexAttributes(t,e){const i=(({verticalOverlayIntervals:t,horizontalOverlayIntervals:e})=>1===t.length&&1===e.length?t[0][1]-t[0][0]<e[0][1]-e[0][0]?"row":"column":1===t.length?"row":1===e.length?"column":"row")(e);return{"flex-wrap":Zt(t,e),"flex-direction":i,"justify-content":$t(Object.assign(Object.assign({},e),{flexDirection:i})),"align-items":Yt(Object.assign(Object.assign({},e),{flexDirection:i})),"align-content":"flex-start"}},common:t=>{if(!Ft.hasBlockChild(t))return{};const e=Ht.attributes(t),i="flex";let s=Ft.extractEffectiveAttributes({display:i,position:"relative"});return s=Object.assign(Object.assign({},s),Ht.getFlexAttributes(t,e)),{attributes:e,css:s}},text:t=>"text"===t.type?{font:"12px/30px regular"}:{},image:t=>"image"===t.type?{background:"no-repeat center","background-size":"cover","background-image":`url(https://dummyimage.com/${t.width}x${t.height})`}:{},size:t=>({width:`${t.width}px`,height:`${t.height}px`})},Xt={generateChildrenCss:(t,e)=>{if(Ft.hasBlockChild(t)){if("flex"===t.css.display&&"wrap"!==t.css["flex-wrap"]){const i=["flex-direction","justify-content","align-items"].map((e=>t.css[e].replace(/flex-|space-/g,""))).join("");Qt[i](t.getBlockChildren(),Object.assign({block:t},e))}"flex"===t.css.display&&"wrap"===t.css["flex-wrap"]&&(t.css.gap=`${e.attributes.horizontalOverlayGaps[1]}px ${e.attributes.verticalOverlayGaps[1]}px`)}},sortChildByLayout(t){"row"===t.css["flex-direction"]?t.children.sort(((t,e)=>t.x-e.x)):"column"===t.css["flex-direction"]?t.children.sort(((t,e)=>t.y-e.y)):"wrap"===t.css["flex-wrap"]&&t.children.sort(((t,e)=>1e4*t.x+500*t.y-(1e4*e.x+500*e.y)))}},Jt=t=>{for(const e of t.children)if(e instanceof Pt)return e.getText();return null},_t=t=>{var e;p(e=t,(t=>{t.css={}})),p(e,(t=>{(t=>{const e=Ht.common(t),i=Ht.size(t),s=Ht.text(t),n=Ht.image(t);if(t.css=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t.css),i),e.css),s),n),Xt.sortChildByLayout(t),Xt.generateChildrenCss(t,e),"wrap"===t.css["flex-wrap"]){const i=e.attributes.verticalOverlayGaps[0],s=e.attributes.horizontalOverlayGaps[0];t.css.padding=`${Math.max(0,i)}px ${Math.max(0,0)}px ${Math.max(0,0)}px ${Math.max(0,s)}px`,t.css["justify-content"]="flex-start"}})(t)}));const i={},n=(t,e,o)=>{const r=s(t);let a,h,l;if("array"===r){for(a=[],l=t.length,h=0;h<l;h++)a.push(n(t[h],e,Jt(t[h])||`${o}-${h}`));return a}return"object"===r?(i[o]=t.css,a={type:"div",props:{class:o},children:n(t.children.filter((t=>t instanceof bt)),t,o)},a):t};let o=n(t,null,Jt(t)||"root");return o=(t=>{const e=t=>{const i=document.createDocumentFragment();if(!Array.isArray(t))return e([t]);for(const s of t){const t=document.createElement(s.type);if(s.props)for(const e in s.props)t.setAttribute(e,s.props[e]);if(Array.isArray(s.children))for(const i of s.children)t.appendChild(e(i));else t.innerText=s.children;i.appendChild(t)}return i},i=e(t),s=document.createElement("div");return s.append(i),s.innerHTML})(o),o=(t=>{let e="",i="";return t.split(/>\s*</).forEach((t=>{t.match(/^\/\w/)&&(i=i.substring(1)),e+=`${i.replace(/\s/g,"  ")}<${t}>\r\n`,t.match(/^<?\w[^>]*[^/]$/)&&!t.startsWith("input")&&(i+="\t")})),e.substring(1,e.length-3)})(o),{html:o,css:(t=>{let e="";for(const i in t){e+=`.${i} {\n`;for(const s in t[i])"0px"!==t[i][s]&&(e+=`  ${s}:${t[i][s]};\n`);e+="}\n"}return e})(i)}},qt=document.getElementById("stageWrap"),{clientWidth:Kt,clientHeight:te}=qt,ee=new B({wrapper:qt});ee.setSize(B.cssSizeToPhysSize([Kt,te]));const ie=new class extends g{constructor(t){super(t),this.matrix=q(0,0),this.name="container",this.enableDrag=!0,this.fillStyle=[0,0,0,0],this.coordinate=new ut,this.showCoordinate()}hideCoordinate(){this.removeNode(this.coordinate)}showCoordinate(){this.appendNode(this.coordinate)}showGrid(){this.coordinate.showGrid()}hideGrid(){this.coordinate.hideGrid()}showCalibration(){this.coordinate.showCalibration()}hideCalibration(){this.coordinate.hideCalibration()}};ie.setSize(ee.getSize()),ee.appendNode(ie);const se=new M({stage:ee}),ne={stage:ee,render:se,container:ie,historyManager:new class{constructor(){this.historyStack=[],this.historyPosition=-1,this.historyLimit=500,(0,O.Z)("command+z,shift+command+z",((t,e)=>{switch(e.key){case"command+z":this.undo();break;case"shift+command+z":this.redo()}}))}pushState(t,e,i){this.historyStack=this.historyStack.slice(0,this.historyPosition+1),this.historyStack[++this.historyPosition]={actionName:t,action:e,data:i},this.historyPosition>=this.historyLimit&&(--this.historyPosition,this.historyStack.shift())}undo(){if(this.canUndo()){const{action:t,data:e}=this.historyStack[this.historyPosition];t.undo(e),this.historyPosition--}}canUndo(){return this.historyPosition>=0}redo(){if(this.canRedo()){this.historyPosition++;const{action:t,data:e}=this.historyStack[this.historyPosition];t.do(e)}}canRedo(){return this.historyPosition<this.historyStack.length-1}},interactive:new class extends n{constructor(t){super(),this.startMovingPoint=[0,0],this.movingVec2=[0,0],this.totalMovingVec2=[0,0],this.lockOrigin=!1,this.hover=!1;for(const e in t)this[e]=t[e];this.focusedNode=this.node,this.focusedNodeMatrix=this.focusedNode.matrix,this.selectedNodes=[],this.addTouchOrMouseEventListener(),this.addShortcutEventListener(),this.addMousewheelListener()}calculateCommonPoints(t){var e,i;this.latestClientPoint=a(this.stage.canvas,G[L].getPosition(t)),this.rootLogicPoint=this.stage.screenCoordToLogicPoint(this.latestClientPoint,this.node.matrix),this.latestLogicPoint=this.stage.screenCoordToLogicPoint(this.latestClientPoint,this.focusedNodeMatrix),this.clientPoint&&(this.movingVec2=(e=this.stage.screenCoordToLogicPoint(this.clientPoint,this.focusedNodeMatrix),[(i=this.stage.screenCoordToLogicPoint(this.latestClientPoint,this.focusedNodeMatrix))[0]-e[0],i[1]-e[1]])),this.clientPoint=[...this.latestClientPoint],this.logicPoint=[...this.latestLogicPoint],this.canvasPoint=this.latestClientPoint.map((t=>t*B.devicePixelRatio))}touchOrMouseEvent(t){this.calculateCommonPoints(t);const{type:e}=t;e===G[L].tapstart&&(this.startTapTime=performance.now(),this.movingVec2=[0,0],this.totalMovingVec2=[0,0],this.isMouseDown=!0,this.trigger("tapstart",t),this.focusedNodeMatrix=this.focusedNode.matrix,this.startMovingPoint=[...this.logicPoint]),e===G[L].tapmove&&(this.totalMovingVec2=h(this.totalMovingVec2,this.movingVec2),this.trigger("tapmove")),e===G[L].tapend&&(this.isMouseDown=!1,this.trigger("tapend"),performance.now()-this.startTapTime<220&&(this.focusedNode.trigger("click"),this.trigger("click",this.focusedNode),performance.now()-this.startClickTime<220&&(this.focusedNode.trigger("dblclick"),this.trigger("dblclick",this.focusedNode)),this.startClickTime=performance.now())),e===G[L].tapleave&&this.trigger("tapend"),this.trigger("tapevent",e),this.lockOrigin=!1,this.render.drawFrame()}addTouchOrMouseEventListener(){const t=this.touchOrMouseEvent.bind(this);this.stage.canvas.addEventListener(G[L].tapstart,t),this.stage.canvas.addEventListener(G[L].tapmove,t),this.stage.canvas.addEventListener(G[L].tapend,t),this.stage.canvas.addEventListener(G[L].tapleave,t),document.addEventListener("wheel",(t=>{t.preventDefault()}),{passive:!1})}addMousewheelListener(){document.body.onmousewheel=t=>{this.trigger("mousewheel",t),this.render.drawFrame()}}addShortcutEventListener(){document.addEventListener("keydown",(t=>{this.trigger("keydown",t),this.render.drawFrame()})),document.addEventListener("keyup",(t=>{this.trigger("keyup",t),this.render.drawFrame()}))}}({stage:ee,render:se,node:ie})};window.drawbord=ne;const{cancelAllselectedNodes:oe,selectParentNode:re}=(t=>{const{stage:e,interactive:i}=t,s=t=>{t.forEach((t=>{if(!i.selectedNodes.includes(t)&&t.enableSlected)t.selected=!0,i.selectedNodes.push(t);else{t.selected=!1;const e=i.selectedNodes.indexOf(t);i.selectedNodes.splice(e,1)}}))},n=()=>{i.selectedNodes.forEach((t=>{t.selected=!1})),i.selectedNodes=[]};return(0,O.Z)("command+a,command+d",((t,e)=>{switch(e.key){case"command+a":i.selectedNodes=[],p(i.node,(t=>{t!==i.node&&t.enableSlected&&!t.name.includes("drawbord_")&&(i.selectedNodes.push(t),t.selected=!0)}));break;case"command+d":n()}t.preventDefault()})),i.register("tapstart",(()=>{if(O.Z.isPressed("Space"))return;O.Z.shift||n();const t=c(i.node,i.canvasPoint);i.focusedNode=t,s([t]),i.clientPoint=a(e.canvas,G[L].getPosition(event)),i.logicPoint=e.screenCoordToLogicPoint(a(e.canvas,G[L].getPosition(event)),t.matrix),t.trigger("tapstart")})),i.register("tapmove",(()=>{if(O.Z.isPressed("Space")||e.isDrawMode()||i.isMouseDown)return;p(i.node,(t=>{t.active=!1}));const t=c(i.node,i.canvasPoint);t!==i.activeNode&&t!==i.node&&It.enterBlock(),t.active=!0,i.activeNode=t})),i.register("tapevent",(t=>{var s;e.isDrawMode()&&"Marquee"===(null===(s=i.drawNode)||void 0===s?void 0:s.constructor.name)&&t===G[L].tapend&&(i.drawNode.delete(),i.drawNode=null)})),(0,O.Z)("Space",(()=>{n(),i.focusedNode=i.node,i.selectedNodes=[i.node]})),{cancelAllselectedNodes:n,selectParentNode:()=>{if(1!==i.selectedNodes.length)return;const{focusedNode:t}=i;n(),i.focusedNode=t.parent,s([t.parent])}}})(ne),{group:ae,ungroup:he,insertSelectedNodesToLast:le,potpackContent:de}=(t=>{const{historyManager:e}=t;return{group:()=>{const i=(t=>{const e=[...t];let i=0;for(;e.length>1&&!(i>e.length);)zt(e[0],e[1])?(e.shift(),i=0):e.push(e.shift()),i++;return e})(t.interactive.selectedNodes),s=(t=>{const e=(t,e)=>t-e,i=t.map((t=>t.x)).sort(e)[0],s=t.map((t=>t.y)).sort(e)[0];return{x:i,y:s,width:t.map((t=>Math.abs(t.x)+t.width)).sort(e).reverse()[0]-i,height:t.map((t=>Math.abs(t.y)+t.height)).sort(e).reverse()[0]-s}})(i),n=new bt(s),{parent:o}=i[0];n.appendNode(i),i.forEach((t=>{t.x-=n.x,t.y-=n.y})),o.removeNode(i),o.appendNode(n),e.pushState(name,{do:()=>{o.appendNode(n)},undo:()=>{o.removeNode(n),o.appendNode(i),i.forEach((t=>{t.x+=n.x,t.y+=n.y}))}})},ungroup:()=>{const{selectedNodes:e}=t.interactive;if(e.length>1&&0===e.length)return;const i=e[0],s=i.parent;let{children:n}=i;n=n.filter((t=>"block"===t.name)),n.forEach((t=>{t.x+=i.x,t.y+=i.y})),s.appendNode(n),s.removeNode(i),t.interactive.selectedNodes=[s],s.selected=!0},insertSelectedNodesToLast:()=>{const{selectedNodes:e}=t.interactive;if(e.length<2)return;const i=e.slice(0,-1),s=e[e.length-1],n=s.getOffset();i.forEach((t=>{const e=t.getOffset();var i,o;t.setPosition((o=n,[(i=e)[0]-o[0],i[1]-o[1]])),t.appendToNode(s)}))},potpackContent:()=>{!function(t){let e=0,i=0;for(const s of t)e+=s.width*s.height,i=Math.max(i,s.width);t.sort(((t,e)=>e.height-t.height));const s=[{x:0,y:0,width:Math.max(Math.ceil(Math.sqrt(e/.95)),i),height:1/0}];let n=0,o=0;for(const e of t)for(let t=s.length-1;t>=0;t--){const i=s[t];if(!(e.width>i.width||e.height>i.height)){if(e.x=i.x,e.y=i.y,o=Math.max(o,e.y+e.height),n=Math.max(n,e.x+e.width),e.width===i.width&&e.height===i.height){const e=s.pop();t<s.length&&(s[t]=e)}else e.height===i.height?(i.x+=e.width,i.width-=e.width):e.width===i.width?(i.y+=e.height,i.height-=e.height):(s.push({x:i.x+e.width,y:i.y,width:i.width-e.width,height:e.height}),i.y+=e.height,i.height-=e.height);break}}}(t.container.children.filter((t=>"drawbord_coordinate"!==t.name)))}}})(ne),{drawShape:ce}=(t=>{t.stage.appendNode(jt),t.interactive.register("tapevent",(()=>{if("draw"===t.stage.mode){jt.visible=!0;const e=B.cssSizeToPhysSize(t.interactive.clientPoint);jt.updatePoint(e)}else jt.visible=!1}));const{stage:e,interactive:i,historyManager:s}=t;let n="1";const o=t=>{W(t,[0,0],i.totalMovingVec2,{size:[1,1],position:i.startMovingPoint})},r=t=>{i.removeEvent("tapmove",o),i.removeEvent("tapend",r),(t=>{const{focusedNode:e}=i;if(Math.max(t.width,t.height)<4)return e.removeNode(t),void(i.drawNode=null);t.trigger("drawEnd"),s.pushState(name,{do:()=>{e.appendNode(t)},undo:()=>{e.removeNode(t)}})})(t)};return i.register("tapstart",(()=>{if(!e.isDrawMode())return;const t=(t=>{const e=(t=>{if("4"===t)return new f({src:Et.default,width:100,height:100});if("5"===t)return new f({src:Dt.default,width:100,height:100});const e={width:0,height:0};return Rt[t].fillStyle&&(e.fillStyle=Rt[t].fillStyle),new Rt[t].Class(e)})(t);return e.setPosition(i.startMovingPoint),e.trigger("drawStart",i.startMovingPoint),i.focusedNode.appendNode(e),i.drawNode=e,e})(n);i.register("tapmove",o,t),i.register("tapend",r,t)})),{drawShape:t=>{"draw"!==e.mode?e.drawMode():e.viewMode(),n=t.key}}})(ne),{deleteAllSelectedNodes:pe}=(t=>{const{historyManager:e,interactive:i}=t,s=t=>{t.forEach((t=>{"container"!==t.name&&t.delete()}))};return{deleteAllSelectedNodes:()=>{const{selectedNodes:t}=i;s(t),e.pushState(name,{do:()=>{s(t)},undo:()=>{t.forEach((t=>{t.parent.appendNode(t)}))}})}}})(ne),{scaleNode:ge}=(t=>{const{stage:e,interactive:i}=t,s=t=>{if(t=Math.max(Math.min(i.node.scale+t,100),.01),i.clientPoint){if(!1===i.lockOrigin){const t=e.screenCoordToLogicPoint(i.clientPoint,i.node.matrix);return F(i.node,[t[0]/i.node.width,t[1]/i.node.height]),void(i.lockOrigin=!0)}i.node.scale=t}};return t.interactive.register("mousewheel",(t=>{const e=t.deltaY/8e3;s(e)})),{scaleNode:s}})(ne),{adjustNodeTransparency:ue}=(t=>{const{interactive:e}=t;return{adjustNodeTransparency:t=>{const{focusedNode:i}=e;i.opacity=Math.min(i.opacity+t,1)}}})(ne),{resizeWindowContent:fe}=(t=>{const{stage:e,container:i,render:s}=t;return{resizeWindowContent:()=>{const{clientWidth:t,clientHeight:n}=e.canvas;e.setSize(B.cssSizeToPhysSize([t,n])),i.setSize([...e.getSize()]),s.drawFrame()}}})(ne),{generateBlockInfo:me}=(t=>({generateBlockInfo:e=>{const{focusedNode:i}=t.interactive;if(i&&"Block"===i.constructor.name){const s=i.children.filter((t=>"BlockInfo"===t.constructor.name));if(s.length>0)return[t.interactive.focusedNode]=s,void o.trigger("createBlockInfo");const n=new Pt;i.appendNode(n),n.setPosition([n.parent.width+300,-198]),t.interactive.focusedNode=n,o.trigger("createBlockInfo"),e.preventDefault()}}}))(ne),{changeBlockType:we}=(t=>({changeBlockType:e=>{t.interactive.selectedNodes.forEach((t=>{t instanceof bt&&t.changeType(Wt[e.key])}))}}))(ne),{resizeNode:ve}=(t=>{const e=new xt({parent:t.interactive.focusedNode});let i,s=[0,0],n=[0,0],o=[0,0],r=[1,1],a=[-1,-1],l=!1,d=!1,c=null;return t.interactive.register("tapstart",(()=>{t.interactive.focusedNode!==c&&t.interactive.focusedNode.parent!==c&&t.interactive.focusedNode.parent.parent!==c&&e.unbind()})),{resizeNode:()=>{if("container"!==t.interactive.focusedNode.name)if(t.stage.viewMode(),t.interactive.focusedNode.children.includes(e))e.unbind();else{if("control"===t.interactive.focusedNode.type)return;c=t.interactive.focusedNode,e.bind(c),e.children.forEach(((c,p)=>{c.register("tapmove",(t=>{o=h(o,t);const c=i[p][0]>e.origin[0]*e.parent.width?n[0]*(1-e.origin[0]):n[0]*e.origin[0],g=i[p][1]>e.origin[1]*e.parent.height?n[1]*(1-e.origin[1]):n[1]*e.origin[1],u=0===c?1:1-o[0]*a[0]/c,f=0===g?1:1-o[1]*a[1]/g;if(l&&d){const t=Math.min(Math.abs(u),Math.abs(f));r=[t*(u/Math.abs(u)),t*(f/Math.abs(f))]}else r=l?[1,f]:d?[u,1]:[u,f];W(e.parent,e.origin,r,{position:s,size:n}),e.parent.selected=!0}),c),c.register("tapstart",(()=>{l=!1,d=!1,e.parent.selected=!0,l=j[p].lockRatioX||l,d=j[p].lockRatioY||d,e.origin=j[p].origin,s=[...e.parent.getPosition()],n=[...e.parent.getSize()],i=R(e.parent),a=[c.x>e.origin[0]*e.parent.width?-1:1,c.y>e.origin[1]*e.parent.height?-1:1],o=[0,0]})),c.register("tapend",(()=>{t.historyManager.pushState("resize shape",{do:t=>{e.parent.setSize(t.size),e.parent.setPosition(t.position)},undo:()=>{e.parent.setSize(n),e.parent.setPosition(s)}},{size:[...e.parent.getSize()],position:[...e.parent.getPosition()]})}))})),["Iframe","CodeBlock"].includes(e.parent.constructor.name)&&(e.children[0].visible=!1,e.children[2].visible=!1,e.children[4].visible=!1,e.children[6].visible=!1,t.render.drawFrame()),["ImageSprite"].includes(e.parent.constructor.name)&&(e.children[1].visible=!1,e.children[3].visible=!1,e.children[5].visible=!1,e.children[7].visible=!1,t.render.drawFrame())}}}})(ne),{viewIframeByUrl:ye}=(t=>{const{container:e}=t,i=new URL(location.href),s=i.searchParams.get("page")||i.searchParams.get("iframe")||i.searchParams.get("html")||i.searchParams.get("website")||i.searchParams.get("url");let n=null;const o=i=>{n=new vt({width:828,height:1792,src:i}),n.setSize=t=>{[n.width,n.height]=t,n.setBoxPoints(),n.setIframeSize()},e.appendNode(n),n.setPosition([150,100]),ct({transition:"easeInOutSine",start:[.5],end:[1],duration:1e3,callback:e=>{[n.scale]=e,t.render.drawFrame()}}).play()};s&&o(s);const r=()=>{var e;if(!(null===(e=null==n?void 0:n.drawPoints)||void 0===e?void 0:e[0]))return;let i=[n.drawPoints[0],n.drawPoints[1]];i=[i[0]/t.interactive.node.scale,i[1]/t.interactive.node.scale],i[1]<50?(n.clipper.translate=[n.clipper.translate[0],-10-i[1]+140],n.slider.translate=[n.slider.translate[0],0-i[1]+100]):(n.clipper.translate=[n.clipper.translate[0],-10],n.slider.translate=[n.slider.translate[0],0])};return t.interactive.register("tapevent",r),t.interactive.register("mousewheel",r),{viewIframeByUrl:o}})(ne),{receiveJson:xe}=((t,{viewIframeByUrl:e})=>{const{stage:i,container:s,render:n}=t;let o=0;const r=t=>{const e=(t=>{const e=JSON.parse(t),i=[],s=t=>{t.width>10&&t.height>10?i.push(t):t.children&&t.children.forEach((t=>{s(t)}))};return s(e),i.map((t=>{let e=Bt(t);return e=(t=>{const e=t=>{var i;Tt(t),(t=>{var e;null===(e=t.children)||void 0===e||e.forEach(((e,i)=>{t.children[i].width&&t.children[i].height||t.children.splice(i,1)})),t.width<50&&t.height<50&&(t.children=[])})(t),null===(i=t.children)||void 0===i||i.forEach((t=>{e(t)}))};return e(t),t})(e),e}))})(t);e.forEach((t=>{const i=Nt(t);if(s.appendNode(i),1===e.length){const t=x.center(i.parent,i);i.setPosition([o,0]),i.setPosition(t),o+=i.width}})),n.drawFrame()},a=t=>{const e=i=>{if(i===t.length)return!1;const s=new FileReader,n=t[i];s.onload=t=>{const e=t.srcElement.result;Gt.includes(n.type)&&h(e),"application/json"===n.type&&r(e)},Gt.includes(n.type)&&s.readAsDataURL(n),"application/json"===n.type&&s.readAsText(n),e(++i)};e(0)},h=t=>{const e=new f({enableDrag:!0});s.appendNode(e),e.register("onload",(()=>{const t=x.center(e.parent,e);e.setPosition(t),n.drawFrame()})),e.updateSrc(t)};return i.canvas.addEventListener("dragenter",(t=>{t.stopPropagation(),t.preventDefault()}),!1),i.canvas.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault()}),!1),i.canvas.addEventListener("drop",(t=>{const{files:e}=t.dataTransfer;a(e),t.stopPropagation(),t.preventDefault()}),!1),window.addEventListener("paste",(t=>{const{files:i}=t.clipboardData,s=t.clipboardData.getData("Text");var n;s&&(t=>{if(/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)?/gi.test(t))return!0;if(t.length<200){const e=/(localhost)/.test(t),i=/\d\d?\d?.\d\d?\d?.\d\d?\d?.\d\d?\d?/.test(t);return e||i}return!1})(n=s)&&e(n),a(i)}),!1),{receiveJson:r}})(ne,{viewIframeByUrl:ye}),{switchMode:be}=(t=>{const{stage:e}=t,i=()=>{e.viewMode()};return i(),{switchMode:()=>{"draw"===e.mode?i():e.drawMode()}}})(ne),{saveNodeAsImage:Se}=(t=>{const{interactive:e}=t;return{saveNodeAsImage:t=>(((t,e)=>{const i=t.x,s=t.y,n=[...t.translate];t.x=0,t.y=0,t.translate=[0,0];const o=l(t.drawPoints),r=new B;r.appendNode(t),r.setSize([o.width,o.height]);const a=new M({ctx:r.ctx,stage:r});return new Promise((e=>{a.drawFrame((()=>{requestAnimationFrame((()=>{let o=r.canvas.toDataURL("image/png");t.setTranslate(n),t.x=i,t.y=s,e({download(){const t=document.createElement("a");t.setAttribute("download","node"),t.href=o,document.body.appendChild(t),t.click(),document.body.removeChild(t)},imageData:o})}))}))}))})(e.focusedNode).then((({download:t})=>{t()})),t.preventDefault(),!0)}})(ne),{moveRight:Pe,moveLeft:ke,moveTop:Ne,moveBottom:Ce}=(t=>({moveRight:e=>{t.interactive.selectedNodes.forEach((t=>t.x+=e||1))},moveLeft:e=>{t.interactive.selectedNodes.forEach((t=>t.x-=e||1))},moveTop:e=>{t.interactive.selectedNodes.forEach((t=>t.y-=e||1))},moveBottom:e=>{t.interactive.selectedNodes.forEach((t=>t.y+=e||1))}}))(ne),{moveTest:ze,scaleTest:Te,overlayIframe:Me}=(t=>{const e=p(t.container.children[1]);let i=[],s=[];return e.forEach((t=>{i=i.concat([t.x,t.y-1e3]),s=s.concat([t.x,t.y])})),{moveTest:ct({transition:"easeOutExpo",start:i,end:s,duration:1e3,callback:i=>{for(let t=0;t<i.length/2;t+=1)e[t].x=i[2*t],e[t].y=i[2*t+1];t.render.drawFrame()}}),scaleTest:ct({transition:"easeInExpo",start:[1],end:[1.6],duration:3e3,callback:e=>{[t.interactive.node.scale]=e,t.render.drawFrame()}}),overlayIframe:()=>{const{selectedNodes:e}=t.interactive,i=e[0],s=t.container.getNodeByName("iframe");if("control"===i.type)return;if(!(1===e.length&&i instanceof f&&s))return;const n=i.getPosition(),o=i.getSize();ct({transition:"easeInOutSine",start:[...s.getPosition(),...s.getSize(),1],end:[...n,...o,.8],duration:300,callback:e=>{s.setPosition(e.slice(0,2)),s.setSize(e.slice(2,4)),t.render.drawFrame()}}).play()}}})(ne);((t,{cancelAllselectedNodes:e})=>{const{interactive:i}=t,s=document.createElement("input");let n=0;const r=()=>{n=0;const{focusedNode:t}=i;"BlockInfo"===t.constructor.name&&setTimeout((()=>{s.style.left=t.drawPoints[0]/2+"px",s.style.top=t.drawPoints[1]/2+"px",s.style.width=t.width/2+"px",s.style.height=t.height/2+"px",s.style.color="#f00",s.style.backgroundColor="#fff",s.focus(),s.value=t.getText()}),0)};document.body.appendChild(s),s.style.cssText="\n      position:fixed;\n      opacity:0;\n      pointer-events: none;\n      z-index:-100;\n    ",i.register("tapstart",r),s.addEventListener("input",(()=>{"BlockInfo"===i.focusedNode.constructor.name&&i.focusedNode.setText(s.value)})),o.register("createBlockInfo",r),i.register("keydown",(t=>{["backspace"===t.code.toLowerCase(),"BlockInfo"===i.focusedNode.constructor.name,""===s.value,++n>=2].every((t=>!0===t))&&(n=0,null==s||s.blur(),i.focusedNode.delete(),e())}))})(ne,{cancelAllselectedNodes:oe}),(t=>{const{container:e}=t,i=new URL(location.href).searchParams.get("qr");if(i){const t=new gt({url:i,width:1e3,height:1e3});e.appendNode(t),t.setPosition(x.center(t.parent,t))}})(ne),(t=>{const{stage:e,historyManager:i,interactive:s}=t;let n=[0,0];const o=(t,e)=>{const[i,s]=e;n=[n[0]+i,n[1]+s],t.forEach((t=>{t.setPosition([t.x+i*t.scale,t.y+s*t.scale])}))};s.register("tapstart",(()=>{e.isDrawMode()||(n=[0,0])})),s.register("tapmove",(()=>{if(e.isDrawMode())return;const{focusedNode:t,isMouseDown:i,movingVec2:n,selectedNodes:r}=s;i&&t&&!e.isDrawMode()&&t.trigger("tapmove",n),!1!==t.enableDrag&&s.isMouseDown&&o(r,s.movingVec2)})),s.register("tapend",(()=>{const{selectedNodes:t}=s;e.isDrawMode()||(s.focusedNode.trigger("tapend"),i.pushState(name,{do:e=>{o(t,e.countMoveVec2)},undo:e=>{o(t,[...e.countMoveVec2.map((t=>-1*t))])}},{countMoveVec2:[...n]}))}))})(ne),(t=>{const{stage:e,container:i,interactive:s}=t;let n;n=new m({text:"",fontSize:10,fillStyle:[0,255,0,1],enableDrag:!1,enableClick:!1}),i.appendNode(n),s.register("tapevent",(()=>{e.isDrawMode()?(n.visible=!0,[n.x,n.y]=s.rootLogicPoint,n.x+=15,n.y+=15,n.setText(`${s.logicPoint.join(",")}`)):n.visible=!1})),(0,O.Z)(".",(e=>{console.log(t.interactive.selectedNodes)}))})(ne),((t,{drawShape:e,group:i,ungroup:s,deleteAllSelectedNodes:n,scaleNode:o,adjustNodeTransparency:r,resizeWindowContent:a,insertSelectedNodesToLast:h,selectParentNode:l,changeBlockType:d,generateBlockInfo:c,resizeNode:p,switchMode:g,saveNodeAsImage:u,potpackContent:f,moveRight:m,moveLeft:w,moveTop:v,moveBottom:y,moveTest:x,scaleTest:b,overlayIframe:S})=>{(0,O.Z)("backspace",(()=>{n()})),(0,O.Z)("command + backspace",(()=>{s()})),(0,O.Z)("r",(()=>{p()})),(0,O.Z)("m",((t,i)=>{e(i)})),(0,O.Z)("-,=",(t=>{r({"-":-.1,"=":.1}[t.key])})),(0,O.Z)("l",(()=>{f()})),(0,O.Z)("[,]",(t=>{o({"[":-.1,"]":.1}[t.key])})),(0,O.Z)("*",(t=>{"ArrowUp"===t.key&&v(1),"ArrowRight"===t.key&&m(1),"ArrowDown"===t.key&&y(1),"ArrowLeft"===t.key&&w(1)})),(0,O.Z)("a",(()=>{x.play()})),(0,O.Z)("o",(()=>{const{focusedNode:e}=t.interactive;e instanceof bt&&console.log(e.getOffset())})),(0,O.Z)("command+g",(t=>{i(),t.preventDefault()})),(0,O.Z)("1,2,3,4,5,b,m",((t,i)=>{e(i)})),(0,O.Z)("command + i",(()=>{h()})),(0,O.Z)("p",(()=>{l()})),(0,O.Z)("tab",(t=>{c(t)})),(0,O.Z)("i,c,t",((t,e)=>{d(e)})),(0,O.Z)("v",(()=>{g()})),(0,O.Z)("command+s",(t=>{u(t)})),t.interactive.register("dblclick",(()=>{t.interactive.focusedNode instanceof vt&&t.interactive.focusedNode.debugIframe(),S()})),window.onresize=a})(ne,{group:ae,ungroup:he,drawShape:ce,deleteAllSelectedNodes:pe,scaleNode:ge,adjustNodeTransparency:ue,resizeWindowContent:fe,insertSelectedNodesToLast:le,selectParentNode:re,changeBlockType:we,generateBlockInfo:me,resizeNode:ve,switchMode:be,saveNodeAsImage:Se,potpackContent:de,moveRight:Pe,moveLeft:ke,moveTop:Ne,moveBottom:Ce,moveTest:ze,scaleTest:Te,overlayIframe:Me}),(t=>{const{container:e}=t,i=new St({fillStyle:[222,80,120,1],name:"HTML"}),s=new St({fillStyle:[80,222,120,1],name:"CSS"}),n=new St({name:"WEBVIEW"});i.setPosition([0,60]),s.setPosition([200,60]),n.setPosition([400,60]),t.interactive.register("click",(o=>{if(o instanceof bt){const{html:a,css:h}=_t(o);(t=>{i.setCode(t),e.appendNode(i),i.register("dblclick",(()=>{Ct(i.codeBlock.outerText)}))})(a),(t=>{s.setCode(t),e.appendNode(s),s.register("dblclick",(()=>{Ct(s.codeBlock.outerText)}))})(h),r={html:a,css:h},n.setCode(r),e.appendNode(n),t.render.renderOneFrame()}var r}))})(ne),(t=>{const{render:e}=t;e.drawFrame(),setTimeout((()=>{e.drawFrame()}),400)})(ne)}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,s),o.exports}s.m=e,t=[],s.O=(e,i,n,o)=>{if(!i){var r=1/0;for(d=0;d<t.length;d++){for(var[i,n,o]=t[d],a=!0,h=0;h<i.length;h++)(!1&o||r>=o)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(a=!1,o<r&&(r=o));if(a){t.splice(d--,1);var l=n();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,n,o]},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.p="/",(()=>{var t={179:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var n,o,[r,a,h]=i,l=0;if(r.some((e=>0!==t[e]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(h)var d=h(s)}for(e&&e(i);l<r.length;l++)o=r[l],s.o(t,o)&&t[o]&&t[o][0](),t[r[l]]=0;return s.O(d)},i=self.webpackChunk=self.webpackChunk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var n=s.O(void 0,[534],(()=>s(657)));n=s.O(n)})();